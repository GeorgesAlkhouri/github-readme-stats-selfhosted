{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],

  "enabledManagers": ["dockerfile", "custom.regex", "github-actions"],

  "customManagers": [
    {
      "customType": "regex",

      "managerFilePatterns": ["/Dockerfile$/"],

      "matchStrings": ["ARG GRS_REF=(?<currentDigest>[a-f0-9]{40})"],

      "datasourceTemplate": "git-refs",
      "depNameTemplate": "github-readme-stats",
      "packageNameTemplate": "https://github.com/anuraghazra/github-readme-stats",

      "currentValueTemplate": "master",
      "versioningTemplate": "git"
    }
  ],

  "packageRules": [
    {
      "matchManagers": ["custom.regex"],
      "matchDepNames": ["github-readme-stats"],
      "groupName": "github-readme-stats upstream ref",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "matchManagers": ["dockerfile"],
      "matchPackageNames": ["node"],
      "groupName": "node base image",
      "rangeStrategy": "bump",
      "allowedVersions": "22.x",
      "automerge": true,
      "automergeType": "pr"
    }
  ]
}
